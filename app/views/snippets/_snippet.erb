<div class="snippet_container">

<div class="ajax_snippet_box">
  <div class="snippet_vote_area<%= @vote_display[snippet.id] %>"
       id="snippet_vote_area_<%= snippet.id %>">
    This snippet is:
    <%= select(:vote, :vote_type, SnippetsController::VoteTypeNames,
               {}, { :class => "snippet_vote_selector_#{snippet.id}" })
     %>

    <div class="snippet_vote_button shadow"
         id="vote_button_<%= snippet.id -%>">
      Vote!
    </div>
  </div>

  <div class="snippet_unvote_area<%= @unvote_display[snippet.id] %>"
       id="snippet_unvote_area_<%= snippet.id %>">
    You voted this snippet was
    <span id="snippet_vote_type_<%= snippet.id %>">
      <%= @vote_type[snippet.id] %></span>.

    <div class="snippet_unvote_button shadow"
         id="unvote_button_<%= snippet.id -%>">
      Changed My Mind!
    </div>
  </div>
</div>

<div class="main_snippet_box">

  <%= link_to_unless_current "<h2> #{h snippet.title} </h2>", snippet %>

  <p> Karma: <%= @snippet_karma[snippet.id] || "??" %> </p>

  <% harsh_format = SnippetsController::Languages[snippet.language]
     harsh_format ||= "ruby"
     harsh :lines => true, :format => harsh_format, :theme => :eiffel do %>
    <%= snippet.body %>
  <% end %>

  <p class="snippet_notes">
    <span class="snippet_notes_tag">Notes:</span>
    <%= h snippet.notes %>
  </p>

  <p>
    <span class="snippet_written_in">Written in</span>
    <span class="snippet_language"> <%= h snippet.language %> </span>
  </p>

  <p>
    <span class="posted_date">
    Posted: <%= snippet.created_at %>
    <% if snippet.updated_at != snippet.created_at %>
      / Last Edited: <%= snippet.updated_at %>
    <% end %>
    </span>

    &nbsp; &nbsp; &nbsp;
    <% n_refactors = snippet.refactors.count %>
    <%= link_to_unless_current "#{n_refactors} Refactors", snippet %>
    <%= link_to 'Edit', edit_snippet_path(snippet) %>
    <%= link_to 'Destroy', snippet, :confirm => 'Delete this snippet?',
              :method => :delete %>
  </p>
</div>

<div class="clear"> </div>

</div>
